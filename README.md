# Section 1
# Backend Spring Boot Application
## Introduction
This is the backend of our LA Crime Explorer application

## Prerequisites
- Java JDK 17.
- MySQL Server (three instances configured for this project).
- IntelliJ IDEA (Community or Ultimate version).
- MySQL JDBC Driver.

## Project Structure

This project is structured as a typical Gradle project for a Java-based web application. Below is a detailed breakdown of the directory and file structure:

- **`.gradle`**
  - Contains Gradle-specific files which are used internally by the Gradle build system.

- **`.idea`**
  - Contains configuration files specific to JetBrains IntelliJ IDEA.

- **`build`**
  - `classes`: Compiled Java classes.
  - `libs`: Generated project library jars.
  - `resources`: Resources compiled into the build directory.
  - `tmp`: Temporary files used during the build process.
  - `generated`: Files generated by the build.
  - `resolvedMainClassName`: Stores the main class name resolved during the build.

- **`gradle`**
  - Contains scripts and properties for the Gradle wrapper.

- **`src`**
  - **`main`**
    - **`java`**
      - `com.dsci551.LACrimeAnalysisTool`
        - `config`: Configuration files and classes.
        - `controller`: Controllers managing web requests.
        - `model`: Data models.
        - `servlet`: Servlets handling HTTP requests.
    - **`resources`**
      - `static`: Static resources like CSS, JS, and images.
      - `templates`: HTML templates.
      - `application.properties`: Configuration properties for the application.
  - **`test`**
    - Java source files for testing.

- **`build.gradle`**
  - Defines project dependencies and build configurations.

- **`db_manager.py`**
  - Python script for database management tasks.

- **`README.md`**
  - Markdown file with general project information.

- **`HELP.md`**
  - Additional help documentation.

- **`Project Architecture.pdf`**
  - Detailed architecture diagram of the project.

- **`settings.gradle`**
  - Additional Gradle settings for the project.

## Project Setup
1. **Clone the Repository:**
   - Clone this project to your local machine or download the source code.

2. **Open Project in IntelliJ IDEA:**
   - Open IntelliJ IDEA.
   - Click on `File > Open` and select the project directory.

3. **Configure JDK:**
   - In IntelliJ, go to `File > Project Structure > Project`.
   - Set the Project SDK to your installed JDK version.

4. **Add External Libraries with Gradle:**
   - Wait for Gradle to finish indexing, then in the Gradle tab, run `LACrimeAnalysisTool > Tasks > build > clean`
   - Run `LACrimeAnalysisTool > Tasks > build > bootRun`

5. **Access the Application:**
   - Once the application is running, you can access it by visiting `http://localhost:8080` in your web browser, or use Postman to test the APIs.

## Database Configuration
Replace the placeholder values in the JDBC URL, username, and password with your actual database configurations.

```java
// Update these URLs in JdbcManager.java with your actual MySQL instance details provided in the Google Doc
String url1 = "jdbc:mysql://{url}:3306/CrimeData";
String url2 = "jdbc:mysql://{url}:3306/CrimeData";
String url3 = "jdbc:mysql://{url}:3306/CrimeData";
```
# API Documentation

This section describes the available endpoints within the application, detailing their purposes, request formats, and sample responses.

## Available Endpoints

### 1. Get Crime Codes
**Endpoint**: `GET /crime-codes`

Retrieves a list of all crime codes along with their descriptions.
**Sample Request**:
GET http://localhost:8080/crime-codes
**Sample Response**:
```json
[
    {
        "Crm_Cd": "470",
        "Crm_Cd_Desc": "TILL TAP - GRAND THEFT ($950.01 & OVER)"
    },
    {
        "Crm_Cd": "350",
        "Crm_Cd_Desc": "THEFT, PERSON"
    }
]
```

### 2. Search Crimes
**Endpoint**: `POST /search-crimes`

Allows searching for crimes within a specified geographical area and time frame. This endpoint accepts a JSON payload with criteria such as date range, crime code, and location coordinates.

**Sample Request**:
```bash
curl -X POST http://localhost:8080/search-crimes \
     -H 'Content-Type: application/json' \
     -d '{
           "startDate": "2010-01-01",
           "endDate": "2023-01-01",
           "crimeCode": "900",
           "longitude": -118.2695,
           "latitude": 33.9825,
           "radius": 0.625,
           "filterBy": "pinpoint"
         }'
```
**Sample Request Body**:
```json
{
  "startDate": "2010-01-01",
  "endDate": "2023-01-01",
  "crimeCode": "900",
  "longitude": -118.2695,
  "latitude": 33.9825,
  "radius": 0.625, // radius in miles
  "filterBy": "pinpoint" // or 'area' for broader searches
}
```
**Sample Response**:
```json
[
    {
        "drNo": "200304246",
        "dateOccurred": "2020-01-05",
        "areaName": "Southwest",
        "crimeCode": "900",
        "crimeDescription": "VIOLATION OF COURT ORDER",
        "latitude": 34.00630187988281,
        "longitude": -118.2842025756836,
        "violenceLevel": 1
    },
    {
        "drNo": "200304318",
        "dateOccurred": "2020-01-03",
        "areaName": "Southwest",
        "crimeCode": "900",
        "crimeDescription": "VIOLATION OF COURT ORDER",
        "latitude": 34.01089859008789,
        "longitude": -118.31120300292969,
        "violenceLevel": 1
    }
]
```
### 3. Get individual crime details
**Endpoint**: `GET /crimeById`

This endpoint retrieves detailed information about a specific crime identified by its DR (Division of Records) number.

### Parameters:
- **drNo** (required): The DR number of the crime, which uniquely identifies the incident in the database.

### Usage:
To retrieve information about a specific crime, you need to provide the DR number as a query parameter in the URL.

**Sample Request**:
GET http://localhost:8080/crimeById?drNo=200300760


**Sample Response**:
```html
<html><body><h2>Crime Data Details</h2>
<p>DR_NO: 200300760</p>
<p>Date Reported: 2020-08-07 00:00:00.0</p>
<p>Date of Occurrence: 2020-08-07 00:00:00.0</p>
<p>Time of Occurrence: 930</p>
<p>Area: 3</p>
<p>Area Name: Southwest</p>
<p>Report District No: 376</p>
<p>Crime Code: 230</p>
<p>Crime Description: ASSAULT WITH DEADLY WEAPON, AGGRAVATED ASSAULT</p>
<p>Victim Age: 41</p>
<p>Victim Sex: F</p>
<p>Victim Descent: B</p>
<p>Premise Code: 502</p>
<p>Premise Description: MULTI-UNIT DWELLING (APARTMENT, DUPLEX, ETC)</p>
<p>Weapon Used Code: 106</p>
<p>Weapon Description: UNKNOWN FIREARM</p>
<p>Status: AA</p>
<p>Status Description: Adult Arrest</p>
<p>Location: 1300    ROLLAND CURTIS               PL</p>
<p>Cross Street: </p>
<p>Latitude: 34.0164</p>
<p>Longitude: -118.3002</p>
<p>Violence Level: 3</p>
</body></html>

```

# Section 2
# Database Manager Tool

## Overview
This Database Manager Tool is designed to facilitate database operations for the LA Crime Map project. It enables administrators to perform various CRUD operations through a command-line interface (CLI), connecting to MySQL databases hosted on AWS RDS. The tool supports operations such as data insertion, updating, deletion, and querying.

## Setup and Installation

### Prerequisites
- Python 3.x
- MySQL connector for Python (`mysql-connector-python`)
- Access to AWS RDS with appropriate credentials

### Installation
1. Ensure Python 3.x is installed on your system.
2. Install the MySQL connector package:


## Configuration
Before running the tool, configure the database connection settings in the script. Update the placeholders in the `db_config` dictionary with the actual database host, port, user, and password.

## Usage
To use the tool, run the script from the command line with the required operation and parameters. Hereâ€™s how to perform various operations:

### Single Operations

1. **Insert**:
- Description: Provide all necessary fields in the order defined by your database schema, separated by spaces.
- Example:
  ```
  python db_manager.py insert 123456 "2020-01-08 00:00:00" "2020-01-08 12:30:00" 1230 3 "Southwest" "0377" "624" "BATTERY - SIMPLE ASSAULT" 36 "F" "B" 501 "SINGLE FAMILY DWELLING" "400" "STRONG-ARM" "IC" "Invest Cont" "1100 W 39TH PL" "Main St" 34.0141 -118.2978
  ```

2. **Update**:
- Description: Specify the record identifier followed by the field-value pairs you wish to update, prefixed with `--`.
- Example:
  ```
  python db_manager.py update 123456 --Vict_Age=37 --Status="AA" --Status_Desc="Adult Arrest"
  ```

3. **Delete**:
- Description: Provide the record identifier of the entry you wish to delete.
- Example:
  ```
  python db_manager.py delete 123456
  ```

4. **View**:
- Description: Use this function to view all records or specify criteria to filter the results.
- Example:
  ```
  python db_manager.py view --AREA_NAME="Southwest"
  ```

### Bulk Operations

1. **Bulk Insert**:
- Description: Provide the path to a CSV file containing multiple records that match the database schema.
- Example:
  ```
  python db_manager.py bulk_insert "crime_new.csv"
  ```

2. **Bulk Update**:
- Description: Specify a condition and the field-value pairs to update, reflecting the SQL `UPDATE` syntax.
- Example:
  ```
  python db_manager.py bulk_update "Status='AA', Status_Desc='Adult Arrest' WHERE AREA_NAME='Southwest'"
  ```

3. **Bulk Delete**:
- Description: Provide conditions for the records you wish to delete, reflecting the SQL `DELETE` syntax.
- Example:
  ```
  python db_manager.py bulk_delete "AREA_NAME='Southwest'"
  ```
